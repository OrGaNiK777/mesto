(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var n=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._templateSelector=n,this._fillImagePopup=r}var n,r;return n=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}},{key:"generateCard",value:function(){this._card=this._getTemplate();var e=this._card.querySelector(".card__title"),t=this._card.querySelector(".card__image");return this._setEventListeners(),e.textContent=this._name,t.src=this._link,t.alt=this._name,this._card}},{key:"_setEventListeners",value:function(){var e=this;this._cardImage=this._card.querySelector(".card__image"),this._likeButton=this._card.querySelector(".card__icon-like"),this._deleteButton=this._card.querySelector(".card__icon-delete"),this._likeButton.addEventListener("click",(function(){e._toggleLike()})),this._deleteButton.addEventListener("click",(function(){e._removeCard()})),this._cardImage.addEventListener("click",(function(){e._fillImagePopup(e._link,e._name)}))}},{key:"_toggleLike",value:function(){this._likeButton.classList.toggle("card__icon-like_active")}},{key:"_removeCard",value:function(){this._card.remove(),this._card=null}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._validSettings=t,this._formElement=n}var t,n;return t=e,(n=[{key:"_errorShow",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._validSettings.errorClass),n.classList.add(this._validSettings.inputErrorClass),n.textContent=t}},{key:"_errorHide",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._validSettings.errorClass),t.classList.remove(this._validSettings.inputErrorClass),t.reset}},{key:"_checkValid",value:function(e){e.validity.valid?this._errorHide(e):this._errorShow(e,e.validationMessage)}},{key:"_setEventListeners",value:function(){var e=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._validSettings.inputSelector)),this._buttonElement=this._formElement.querySelector(this._validSettings.submitButtonSelector),this.toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkValid(t),e.toggleButtonState()}))}))}},{key:"_hasInvalid",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"toggleButtonState",value:function(){this._hasInvalid()?(this._buttonElement.setAttribute("disabled",!0),this._buttonElement.classList.add(this._validSettings.inactiveButtonClass)):(this._buttonElement.removeAttribute("disabled"),this._buttonElement.classList.remove(this._validSettings.inactiveButtonClass)),this._buttonElement.setAttribute.reset}},{key:"enableValid",value:function(){this._setEventListeners()}},{key:"resetValidation",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){e._errorHide(t)}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),a={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button-save",inactiveButtonClass:"popup__button-save_inactive",inputErrorClass:"popup__input-error_active",errorClass:"popup__input_disabled"},u=document.querySelector(".cards"),l=document.querySelectorAll(".popup__button-close"),s=document.querySelector(".popup-profile"),c=document.querySelector("#popupProfileName"),p=document.querySelector("#popupProfileAbout"),d=document.querySelector("#popupProfileForm"),m=document.querySelector(".profile__name"),v=document.querySelector(".profile__about"),_=document.querySelector(".profile__edit-button"),f=document.querySelector(".profile__add-button"),y=document.querySelector(".popup-add"),h=y.querySelector("#popupInputTitle"),S=y.querySelector("#popupInputLink"),b=document.querySelector("#popupNewCardForm"),g=document.querySelector(".popup-img"),k=g.querySelector(".popup-img__img"),E=g.querySelector(".popup-img__title");function L(e){e.classList.add("popup_opened"),document.addEventListener("keydown",w)}function q(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",w)}var C=function(e){e.target===e.currentTarget&&q(e.currentTarget)},w=function(e){"Escape"===e.key&&q(document.querySelector(".popup_opened"))};function j(e,t){L(g),k.src=e,k.alt=t,E.textContent=t}l.forEach((function(e){var t=e.closest(".popup");t.addEventListener("mousedown",C),e.addEventListener("click",(function(){return q(t)}))})),_.addEventListener("click",(function(){L(s),c.value=m.textContent,p.value=v.textContent,x.resetValidation()})),d.addEventListener("submit",(function(e){e.preventDefault(),q(s),m.textContent="".concat(c.value),v.textContent="".concat(p.value)})),f.addEventListener("click",(function(){P.resetValidation(),L(y)}));var B=function(e){return new n(e,"#AddNewCard-template",j).generateCard()};[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"}].forEach((function(e){u.append(B(e))})),b.addEventListener("submit",(function(e){e.preventDefault();var t={name:h.value,alt:h.value,link:S.value};u.prepend(B(t)),e.target.reset(),q(y)}));var x=new i(a,d);x.enableValid();var P=new i(a,b);P.enableValid()})();